[[plugins]]
repo = 'neoclide/coc.nvim'
merged = 0
rev = 'release'
hook_add = '''
  nmap <silent> gd <Plug>(coc-definition)
  nmap <silent> gy <Plug>(coc-type-definition)
  nmap <silent> gi <Plug>(coc-implementation)
  nmap <silent> gr <Plug>(coc-references)

  nmap <silent> <C-c><C-n> <Plug>(coc-diagnostic-next-error)
  nmap <silent> <C-c><C-p> <Plug>(coc-diagnostic-prev-error)

  nnoremap <silent><nowait><expr> <C-n> coc#float#has_scroll() ? coc#float#scroll(1) : "\<C-n>"
  nnoremap <silent><nowait><expr> <C-p> coc#float#has_scroll() ? coc#float#scroll(0) : "\<C-p>"
  inoremap <silent><nowait><expr> <C-n> coc#float#has_scroll() ? "\<c-r>=coc#float#scroll(1)\<cr>" : "\<Right>"
  inoremap <silent><nowait><expr> <C-p> coc#float#has_scroll() ? "\<c-r>=coc#float#scroll(0)\<cr>" : "\<Left>"
  vnoremap <silent><nowait><expr> <C-n> coc#float#has_scroll() ? coc#float#scroll(1) : "\<C-n>"
  vnoremap <silent><nowait><expr> <C-p> coc#float#has_scroll() ? coc#float#scroll(0) : "\<C-p>"

  " Use <c-space> to trigger completion.
  inoremap <silent><expr> <c-space> coc#refresh()

  " Remap for rename current word
  nmap <C-c><C-r> <Plug>(coc-rename)
  " Highlight symbol under cursor on CursorHold
  autocmd CursorHold * silent call CocActionAsync('highlight')
  " Use K for show documentation in preview window
  nnoremap <silent> K :call <SID>show_documentation()<CR>
  function! s:show_documentation()
    if &filetype == 'vim'
      execute 'h '.expand('<cword>')
    else
      call CocAction('doHover')
    endif
  endfunction
  let g:coc_filetype_map  = {
  \ 'htmldjango': 'html',
  \ }
  " Add `:Format` command to format current buffer.
  command! -nargs=0 Format :call CocAction('format')

  " for coc-snippets
  let g:coc_snippet_next = '<TAB>'

  " https://vim-jp.slack.com/archives/CQ88WB7B3/p1634050547033100
  function! s:complete_coc(argLead, cmdLine, cursorPos) abort
    if match(a:cmdLine[0 : a:cursorPos], '\<Coc!\?\s\+\a*$') < 0
      return ''
    endif

    if empty(get(s:, 'coc_actions', ''))
      let s:coc_actions = join(map(getcompletion("CocAction('", 'help'), 'v:val[11:-3]'), "\n")
    endif

    return s:coc_actions
  endfunction

  command! -nargs=+ -complete=custom,s:complete_coc -bang Coc
        \ call CocAction{<bang>0 ? '' : 'Async'}(<f-args>)
'''

hook_post_source = '''
  " for coc-actions
  " Remap for do codeAction of selected region
  function! s:cocActionsOpenFromSelected(type) abort
    execute 'CocCommand actions.open ' . a:type
  endfunction
  xmap <silent> <leader>a :<C-u>execute 'CocCommand actions.open ' . visualmode()<CR>
  nmap <silent> <leader>a :<C-u>set operatorfunc=<SID>cocActionsOpenFromSelected<CR>g@
'''

[[plugins]]
repo = 'tpope/vim-commentary'

[[plugins]]
repo = 'cohama/lexima.vim'
hook_add = '''
autocmd FileType TelescopePrompt let b:lexima_disabled = 1
'''

[[plugins]]
repo = 'machakann/vim-sandwich'

[[plugins]]
repo = 'bronson/vim-trailing-whitespace'

[[plugins]]
repo = 'Yggdroot/indentLine'
hook_add = '''
  autocmd user indentline doautocmd indentline syntax
'''

[[plugins]]
repo =  'editorconfig/editorconfig-vim'
hook_add = '''
  let g:EditorConfig_verbose=1
'''

[[plugins]]
repo = 'vim-scripts/camelcasemotion'
hook_add = '''
  map w <Plug>CamelCaseMotion_w
  map b <Plug>CamelCaseMotion_b
  map e <Plug>CamelCaseMotion_e
  sunmap w
  sunmap b
  sunmap e
'''

[[plugins]]
repo = 'wakatime/vim-wakatime'

[[plugins]]
repo='mbbill/undotree'

[[plugins]]
repo = 'lambdalisue/readablefold.vim'

[[plugins]]
repo = 'nvim-treesitter/nvim-treesitter'
merged = 0
hook_add = '''
set foldmethod=expr
set foldexpr=nvim_treesitter#foldexpr()
set foldlevel=99
'''
hook_post_source = '''
lua << EOF
  require('nvim-treesitter.configs').setup {
      highlight = {
          enable = true,                    -- false will disable the whole extension
          disable = {  },                   -- list of language that will be disabled
      },
      indent = {
        enable = false
      },
      incremental_selection = {
          enable = true,
          disable = {  },
          keymaps = {                       -- mappings for incremental selection (visual mappings)
            init_selection = 'gnn',         -- maps in normal mode to init the node/scope selection
            node_incremental = "grn",       -- increment to the upper named parent
            scope_incremental = "grc",      -- increment to the upper scope (as defined in locals.scm)
            node_decremental = "grm",       -- decrement to the previous node
          }
      }
  }
EOF
'''

[[plugins]]
repo = 'romgrk/nvim-treesitter-context'
depends = ['nvim-treesitter']

[[plugins]]
repo = 'antoinemadec/FixCursorHold.nvim'
